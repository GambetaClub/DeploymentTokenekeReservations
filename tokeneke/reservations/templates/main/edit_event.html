{% extends 'main/base.html' %}

{% block head %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/forms.css' %}" />
<script src="{% static 'js/forms.js' %}"></script>
{% endblock head %}

{% block content %}
<form method="post" action="{% url 'edit_event' event.id %}">
	<div class="form-container">
		{% csrf_token %} {{ form.media }}
		<div class="row justify-content-center">
			<div class="form-group col-md-6">
				{{ form.title.label }}{{ form.title }}
				{% if form.title.errors %}
				<span class="form-error" role="alert">
					{{ form.title.errors }}
				</span>
				{% endif %}
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="form-group col-md-6">
				{{ form.description.label }} {{ form.description }}
				{% if form.description.errors %}
				<span class="form-error" role="alert">
					{{ form.description.errors }}
				</span>
				{% endif %}
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="form-group col-md-3">
				{{ form.gender.label }} {{ form.gender }}
				{% if form.gender.errors %}
				<span class="form-error" role="alert">
					{{ form.gender.errors }}
				</span>
				{% endif %}
			</div>
			<div class="form-group col-md-3">
				{{ form.team.label }} {{ form.team }}
				{% if form.team.errors %}
				<span class="form-error" role="alert">
					{{ form.team.errors }}
				</span>
				{% endif %}
			</div>
		</div>
		<div class="row justify-content-center">
			<button type="submit" class="btn btn-primary mb-2">
				Save Event
			</button>
		</div>
	</div>
</form>
<div class="row justify-content-center">
    <table class="form-table">
        <h4>Activities</h4>
        <thead>
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Recurrences</th>
            <th scope="col">Time</th>
			<th scope="col">Dates</th>
            <th scope="col">Capacity</th>
			<th scope="col">Active</th>
          </tr>
        </thead>
        <tbody>
          {% for activity in activities %}
            <tr class="clickable-row" data-href="{% url 'edit_activity' activity.id %}">
                <td data-label="Title">{{ activity.title }}</td>
                <td data-label="Recurrences">{{activity.get_rules}}</td>
                <td data-label="Time">{{ activity.start_time|time:"h:i A" }} - {{ activity.end_time|time:"h:i A" }}</td>
				<td data-label="Dates">{{activity.date_set.count}}</td>
                <td data-label="Capacity">{{activity.capacity}}</td>
                <td data-label="Active">{{activity.is_active}}</td>
            </tr>
            {% endfor %}    
        </tbody> 
      </table>
</div>
{% endblock content %}
